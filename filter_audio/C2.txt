cmake_minimum_required(VERSION 3.4.1)

set(SOURCE_FILES
    "aec/aec_core.c"
    "aec/aec_core_sse2.c"
    "aec/aec_rdft.c"
    "aec/aec_rdft_sse2.c"
    "aec/aec_resampler.c"
    "aec/echo_cancellation.c"
    "agc/analog_agc.c"
    "agc/digital_agc.c"
    "ns/noise_suppression.c"
    "ns/noise_suppression_x.c"
    "ns/ns_core.c"
    "ns/nsx_core.c"
    "ns/nsx_core_c.c"
    "other/complex_bit_reverse.c"
    "other/complex_fft.c"
    "other/copy_set_operations.c"
    "other/cross_correlation.c"
    "other/delay_estimator.c"
    "other/delay_estimator_wrapper.c"
    "other/division_operations.c"
    "other/dot_product_with_scale.c"
    "other/downsample_fast.c"
    "other/energy.c"
    "other/fft4g.c"
    "other/float_util.c"
    "other/get_scaling_square.c"
    "other/high_pass_filter.c"
    "other/min_max_operations.c"
    "other/randomization_functions.c"
    "other/real_fft.c"
    "other/resample_48khz.c"
    "other/resample_by_2.c"
    "other/resample_by_2_internal.c"
    "other/resample_fractional.c"
    "other/ring_buffer.c"
    "other/speex_resampler.c"
    "other/spl_init.c"
    "other/splitting_filter.c"
    "other/spl_sqrt.c"
    "other/spl_sqrt_floor.c"
    "other/vector_scaling_operations.c"
    "vad/vad_core.c"
    "vad/vad_filterbank.c"
    "vad/vad_gmm.c"
    "vad/vad_sp.c"
    "vad/webrtc_vad.c"
    "zam/filters.c"
    "filter_audio.h"
    "filter_audio.c"
    )

add_library(filteraudio STATIC ${SOURCE_FILES})

add_custom_command(OUTPUT libfilteraudio.a
                   COMMAND make run
                   WORKING_DIRECTORY ${CMAKE_CURRENT_SOURCE_DIR}
)

target_link_libraries(filteraudio)
